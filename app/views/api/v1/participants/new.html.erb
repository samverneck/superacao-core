<%= render 'shared/subheader', headline: 'Participantes', levels: ['Anjos do Superação, Participantes'] %>

<div class="wrapper wrapper-content  animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title"><h5>Criar Participante</h5></div>
        <div class="ibox-content">
          <%= simple_form_for @participant_profile, url: participants_path, method: :post do |f|%>
            <%= f.error_notification %>
            <div class="hr-line-dashed"></div>
            <%= f.input :participant_type, collection: [['Anjo','Angel'],['Arcanjo', 'Archangel'], ['Superador', 'Overcomer']], as: :radio_buttons, required: true %>
            <%= f.simple_fields_for :participant do |participant| %>
              <%= participant.input :pacient, collection: [['Paciente','myself'],['Familiar','family_member']], as: :radio_buttons, required: true %>
            <% end %>
            <%= f.input :first_name, required: true %>
            <%= f.input :last_name, required: true %>
            <%= f.input :email, required: true %>
            <%= f.input :relationship, required: true %>
            <%= f.input :occupation, required: true %>
            <%= f.input :belief, required: false %>
            <div class="hr-line-dashed"></div>
            <%= f.input :birthdate, as: :date, required: true %>
            <%= f.input :city, required: true %>
            <%= f.input :state, required: true %>
            <%= f.input :country, required: true %>
            <div class="hr-line-dashed"></div>
            <%= f.input :facebook, required: false, label:false %>
            <%= f.input :instagram, required: false, label:false %>
            <%= f.input :whatsapp, required: false, label:false %>
            <%= f.input :youtube, required: false, label:false %>
            <%= f.input :snapchat, required: false, label:false %>
            <div class="hr-line-dashed"></div>
            <div class="ibox-title"><h5>Sobre o câncer</h5></div>
            <div class="hr-line-dashed"></div>
            <%= f.simple_fields_for :participant do |participant| %>
              <%= participant.input :cancer_status, collection: [['Em tratamento','during_treatment'],['Câncer superado ou em remissão','overcome']], checked: ['Em tratamento','during_treatment'], as: :radio_buttons, required: true %>
              <div class="current-treatment">
                <div class="ibox-title"><h5>Câncer atual</h5></div>
                <%= participant.simple_fields_for :current_treatment_profile do |current_treatment|%>
                  <%= current_treatment.input :metastasis, as: :boolean, checked_value: true, unchecked_value: false %>
                  <%= current_treatment.input :relapse, as: :boolean, checked_value: true, unchecked_value: false %>
                  <div class="hr-line-dashed"></div>
                  <%= current_treatment.simple_fields_for :cancer_treatment do |cancer_treatment|%>
                    <%= cancer_treatment.input :cancer_type_id, collection: @cancer_types %>
                  <% end %>
                  <%= current_treatment.simple_fields_for :cancer_treatment do |treatment| %>
                    <%@treatment_types.each do |treatment_type| %>
                      <span><%= treatment_type.name %></span><br>
                      <!-- checkboxes for status -->
                      <br>
                    <% end %>
                  <% end %>
                <% end %>
              </div>
              <div class="past-treatment" hidden=true>
                <div class="ibox-title"><h5>Câncer superado</h5></div>
                  <%= participant.simple_fields_for :past_treatment_profile do |past_treatment|%>
                  <%= past_treatment.input :metastasis, as: :boolean, checked_value: true, unchecked_value: false %>
                  <%= past_treatment.input :relapse, as: :boolean, checked_value: true, unchecked_value: false %>
                  <div class="hr-line-dashed"></div>
                <% end %>

              </div>
            <% end %>
            <div class="hr-line-dashed"></div>
            <%= f.button :submit, 'Salvar Participante', class: 'btn btn-primary' %>
            <%= button_tag "Limpar dados", type: :reset, :class =>"btn btn-white" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
